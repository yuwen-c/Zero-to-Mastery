## what is Redux

- redux is a libraray that is good ar state management.
- it stores all the state in a complex object in the top component.
- it can prevent the caos of too many state and data flow.
- it is inspired by database design. 
- it's not designed for only react, but just happened to work well with it.


## why Redux

- when our app gets bigger, we need it to manage the state.
- can share states between two containers.
  - we need a parent component to solve this in react.
- predictible state, sine it follows these principles:
  - single source
  - read only
  - changed by only pure function
  
## what Redux do

- action -> reducer -> store -> make changes, one way data-flow
  - action: button, trigger
  - reducer: pure function
  - store: state

## one sentence to describe Redux

- think of Redux as "this.state"

## installation of Redux
### use redux on the previous project
- ```git clone + url``` the project
- ```npm install``` to download the needed packages
- ```npm start``` to see if it works well

### installation
- ``` npm install redux```
- ``` npm install react-redux``` to let redux connects to react
  - redux only connects to container, not dumb components.


## start using Redux
- action -> reducer -> store -> make changes

### actions.js
- define an action that returns an object, such as setSearchfield, receives a parameter- text.
  - return an object that contains:
  - type: the action that is going to take
  - payload: data send to reducer. 
- export this action
- import { actionName } from constant file
  - replace type name with constant

### constants.js
- export it.
- set action name as a constant

### reducers.js
- import constants.js
- need a initial state declaring in an object.
- a big function, reads actions and spit out state.
- a reducer is a function that has default parameters, and:
  - state=initial state
  - action is an empty { }. action parameter is object that we are returning in action.
- use switch case, the condition is action.type
  - case matchs to our constant, return a state from action (use ```Object.assign```)
  - default


### index.js
- ```import { Provider, connect } from 'react-redux';``` : connect redux to our app
- to create a "store" of redux (from here: action -> reducer -> store -> make changes):
  - ```import { createStore } from 'redux';```
  - ***New a store: use createStore method, and reducer, the function that can return a new state object, to create our store.***
  ```
  const store = createStore(rootReducer); 
  // const store = createStore(searchRobots); // or just put one reducer here for now
  ```
  
#### try this:
```
// index.js

ReactDOM.render(<App Pstore={store}/>, document.getElementById('root'));
      // pass this store as prop to <App>
      
// App.js

ComponentDidMount(){
  console.log(this.props.Pstore); // {dispatch: ƒ, subscribe: ƒ, getState: ƒ, replaceReducer: ƒ, Symbol(observable): ƒ}
  console.log(this.props.Pstore.getState()); // {searchfield: ""}
}
```
- use ```getState()``` to get our state


#### use Provider instead
```
ReactDOM.render(
                <Provider Pstore={store}>
                    <App/>   
                </Provider>, document.getElementById('root'));
```
- we don't want this state intefere all the components, we just want it connecting to App
- so pass the state prop to Provider, and wrap the App





## Object.assign()

### a shallow clone
```
const o1 = {a:1, b:2, c:3};
const clone = Object.assign({}, o1) // pass by value
console.log(clone); // {a:1, b:2, c:3}
```

### merge objects
```
const o1 = { a: 1, b: 1, c: 1 };
const o2 = { b: 2, c: 2 };
const o3 = { c: 3 };

const obj = Object.assign({}, o1, o2, o3);
console.log(obj);
// {a: 1, b: 2, c: 3}
```
- same property will be overwritten

### use this on Reducers.js
```
export const searchRobots = (state=initialState, action={}) => {
    switch (action.type) {
        case CHANGE_SEARCH_FIELD:
            // return a new state, not modify it
            // merge several things to the first parameter { }
            return Object.assign({}, state, {searchfield : action.payload});
        default:
            return state;
    }
```




